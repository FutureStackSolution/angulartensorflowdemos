<div class="container">
  <mat-card class="hand-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>back_hand</mat-icon>
        Hand Detection
      </mat-card-title>
      <mat-card-subtitle>Live hand landmarks using TensorFlow.js</mat-card-subtitle>
    </mat-card-header>

    @if(errorMessage) {
      <div class="error-message">
        <mat-icon>error</mat-icon>
        <p>{{ errorMessage }}</p>
      </div>
    }

    <mat-card-content class="content-layout">
      <div class="video-container">
        @if(isLoading) {
          <div class="loading-overlay">
            <mat-spinner diameter="56"></mat-spinner>
            <div class="loading-text">Loading…</div>
          </div>
        }
        <video #video autoplay playsinline muted width="640" height="480" [hidden]="!isTracking"></video>
        <canvas #canvas width="640" height="480" [hidden]="!isTracking"></canvas>

        @if(!isTracking) {
          <div class="placeholder-video">
            <mat-icon>videocam_off</mat-icon>
            <p>Camera feed will appear here when started</p>
          </div>
        }
      </div>

      <mat-card-actions>
        @if(!isTracking) {
          <button mat-raised-button color="primary" (click)="startTracking()" [disabled]="isLoading">
            @if(!isLoading) {
              <ng-container>
                <mat-icon>play_arrow</mat-icon>
                <span>Start</span>
              </ng-container>
            }
            @if(isLoading) {
              <ng-container>
                <mat-spinner diameter="20"></mat-spinner>
                <span>Starting…</span>
              </ng-container>
            }
          </button>
        }

        @if(isTracking) {
          <button mat-raised-button color="warn" (click)="stopTracking()">
            <mat-icon>stop</mat-icon>
            <span>Stop</span>
          </button>
        }
      </mat-card-actions>
    </mat-card-content>
  </mat-card>
</div>

